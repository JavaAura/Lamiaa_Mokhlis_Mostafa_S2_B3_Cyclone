<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Commandes - Cyclone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF0000',
                        secondary: '#000000',
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-100">
    <!-- Top navbar -->
    <nav class="bg-secondary text-white">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="text-2xl font-bold">
                <span class="text-primary">C</span>yclone
            </div>
            <div>
                878-9674-4455
            </div>
        </div>
    </nav>

    <!-- Menu navbar -->
    <div class="bg-primary">
        <div class="container mx-auto px-4">
            <ul class="flex justify-center space-x-6 py-4">
                <li><a th:href="@{/Page(action='home')}" class="text-white font-bold hover:text-secondary">Home</a></li>
                <li><a th:href="@{/Page(action='product')}" class="text-white font-bold hover:text-secondary">Products</a></li>
                <li><a th:href="@{/Page(action='contact')}" class="text-white font-bold hover:text-secondary">Contact</a></li>
            </ul>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6 text-secondary">Gestion des Commandes</h1>

        <!-- Barre de recherche -->
        <div class="mb-4">
            <input id="searchInput" type="text" placeholder="Rechercher une commande..." class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"
                onkeyup="filterOrders()">
        </div>

        <!-- Tableau des commandes -->
        <div class="overflow-x-auto bg-white rounded-lg shadow overflow-y-auto relative">
            <table class="border-collapse table-auto w-full whitespace-no-wrap bg-white table-striped relative">
                <thead>
                    <tr class="text-left">
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">ID</th>
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">Date</th>
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">Client</th>
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">Total</th>
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">Statut</th>
                        <th class="bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs">Actions</th>
                    </tr>
                </thead>
                <tbody id="orderTableBody">
                    <!-- Les commandes seront générées dynamiquement ici -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="mt-4 flex justify-center">
            <nav id="pagination" class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                <!-- Pagination dynamically generated -->
            </nav>
        </div>
    </div>

    <script>
        // Simulons des données de commandes
        const orders = [
            { id: 1, date: '2023-05-01', client: 'John Doe', total: 1299.99, status: 'En attente' },
            { id: 2, date: '2023-05-02', client: 'Jane Smith', total: 2499.98, status: 'En traitement' },
            { id: 3, date: '2023-05-03', client: 'Bob Johnson', total: 799.99, status: 'Expédiée' },
            // Ajoutez plus de commandes ici...
        ];

        let currentPage = 1;
        const itemsPerPage = 10;
        let filteredOrders = [...orders];

        function populateOrderTable() {
            const tableBody = document.getElementById('orderTableBody');
            tableBody.innerHTML = '';

            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedOrders = filteredOrders.slice(start, end);

            paginatedOrders.forEach(order => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">${order.id}</td>
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">${order.date}</td>
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">${order.client}</td>
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">$${order.total.toFixed(2)}</td>
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">${order.status}</td>
                    <td class="border-dashed border-t border-gray-200 px-6 py-4">
                        <button onclick="viewOrder(${order.id})" class="text-blue-500 hover:text-blue-700">Voir</button>
                        <button onclick="updateOrderStatus(${order.id})" class="text-green-500 hover:text-green-700 ml-2">Mettre à jour</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            updatePagination();
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);
            const paginationElement = document.getElementById('pagination');
            paginationElement.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.innerText = i;
                pageButton.classList.add('bg-white', 'border-gray-300', 'text-gray-500', 'hover:bg-gray-50', 'relative', 'inline-flex', 'items-center', 'px-4', 'py-2', 'border', 'text-sm', 'font-medium');
                if (i === currentPage) {
                    pageButton.classList.add('bg-primary', 'text-white');
                }
                pageButton.onclick = () => {
                    currentPage = i;
                    populateOrderTable();
                };
                paginationElement.appendChild(pageButton);
            }
        }

        function filterOrders() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            filteredOrders = orders.filter(order => 
                order.client.toLowerCase().includes(query) || 
                order.id.toString().includes(query) ||
                order.status.toLowerCase().includes(query)
            );
            currentPage = 1;
            populateOrderTable();
        }

        function viewOrder(id) {
            // Implement view order functionality
            alert(`Voir la commande ${id}`);
        }

        function updateOrderStatus(id) {
            // Implement update order status functionality
            alert(`Mettre à jour le statut de la commande ${id}`);
        }

        // Initialize order table when the page loads
        window.onload = function () {
            populateOrderTable();
        }
    </script>
</body>

</html>
